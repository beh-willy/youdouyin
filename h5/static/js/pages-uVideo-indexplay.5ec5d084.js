(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-uVideo-indexplay"],{"2a33":function(t,i,e){var n=e("4e8f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("b60d2572",n,!0,{sourceMap:!1,shadowMode:!1})},"4e8f":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 文章场景相关 */.zhao[data-v-c582046c]{position:absolute;top:0;left:0;z-index:1111;width:100%;height:100%;background:rgba(0,0,0,.7)}.ad[data-v-c582046c]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:11111;width:%?500?%;height:%?700?%}.ad .close[data-v-c582046c]{position:absolute;top:0;right:0}.ad .adPic[data-v-c582046c]{width:100%;height:100%}.container[data-v-c582046c]{position:fixed;top:%?130?%;left:%?40?%;z-index:11111}.container uni-image[data-v-c582046c]{width:%?80?%;height:%?80?%;border-radius:50%;vertical-align:bottom}.front[data-v-c582046c],\n.back[data-v-c582046c]{position:absolute;top:0;left:0\n  /* backface-visibility: hidden; */}\n/*---定义图片翻转动画---*/@-webkit-keyframes toback-data-v-c582046c{0%{-webkit-transform:rotateY(0deg);transform:rotateY(0deg)}50%{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}100%{-webkit-transform:rotateY(1turn);transform:rotateY(1turn)}}@keyframes toback-data-v-c582046c{0%{-webkit-transform:rotateY(0deg);transform:rotateY(0deg)}50%{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}100%{-webkit-transform:rotateY(1turn);transform:rotateY(1turn)}}@-webkit-keyframes tofront-data-v-c582046c{0%{-webkit-transform:rotateY(-180deg);transform:rotateY(-180deg)}50%{-webkit-transform:rotateY(0deg);transform:rotateY(0deg)}100%{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}}@keyframes tofront-data-v-c582046c{0%{-webkit-transform:rotateY(-180deg);transform:rotateY(-180deg)}50%{-webkit-transform:rotateY(0deg);transform:rotateY(0deg)}100%{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}}.front[data-v-c582046c]{-webkit-animation:toback-data-v-c582046c 3s infinite;animation:toback-data-v-c582046c 3s infinite}.back[data-v-c582046c]{-webkit-animation:tofront-data-v-c582046c 3s infinite;animation:tofront-data-v-c582046c 3s infinite}.avator[data-v-c582046c]{width:%?70?%;height:%?70?%;border-radius:50%}.subtext[data-v-c582046c]{padding-left:%?20?%}.ls[data-v-c582046c]{padding:%?18?% 0!important}',""])},"8a0c":function(t,i,e){"use strict";e.r(i);var n=e("f923"),a=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);i["default"]=a.a},a16a:function(t,i,e){"use strict";var n,a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"uni__container uni__videopage flexbox flex_col"},[e("v-uni-view",{staticClass:"container",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openOpro.apply(void 0,arguments)}}},[e("a",{staticClass:"contens",attrs:{href:t.toUrl+"open@",target:"_blank"}},[e("v-uni-view",{staticClass:"front"},[e("v-uni-image",{attrs:{src:t.screenAd,mode:""}})],1),e("v-uni-view",{staticClass:"back"},[e("v-uni-image",{attrs:{src:t.screenAd,mode:""}})],1)],1)]),t.showAd?e("v-uni-view",{staticClass:"zhao"}):t._e(),t.showAd?e("v-uni-view",{staticClass:"ad",attrs:{id:"ad"}},[e("a",{staticClass:"contens",attrs:{href:t.toUrl+"open@",target:"_blank"}},[e("v-uni-image",{staticClass:"adPic",attrs:{src:t.screenAd,mode:""}})],1),e("v-uni-view",{staticClass:"close text-grey text-xl"},[e("v-uni-text",{staticClass:"text-xs"},[e("v-uni-text",{attrs:{id:"count3"}},[t._v(t._s(t.time))]),t._v("s后关闭")],1),e("v-uni-text",{staticClass:"cuIcon-roundclose",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.closeAd.apply(void 0,arguments)}}})],1)],1):t._e(),e("header-bar",{attrs:{isBack:!0,title:" ",bgColor:{background:"transparent"},center:!0,transparent:!0}},[e("v-uni-text",{staticClass:"uni_btnIco iconfont icon-hot",attrs:{slot:"back"},slot:"back"})],1),e("v-uni-view",{staticClass:"uni__scrollview flex1"},[e("v-uni-swiper",{staticStyle:{height:"100%"},attrs:{"indicator-dots":!1,duration:200,vertical:!0,current:t.videoIndex},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.handleSlider.apply(void 0,arguments)}}},[t._l(t.vlist,function(i,n){return[e("v-uni-swiper-item",[e("v-uni-view",{staticClass:"uni_vdplayer"},[e("v-uni-video",{ref:"myVideo"+n,refInFor:!0,staticClass:"player-video",attrs:{"x5-video-player-type":"h5","x5-video-player-fullscreen":"true",id:"myVideo"+n,src:i.href,controls:!1,loop:!0,"show-center-play-btn":!1,objectFit:"fill"}}),e("v-uni-view",{staticClass:"vd-cover flexbox",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleClicked(n)}}},[t.isPlay?t._e():e("v-uni-text",{staticClass:"iconfont icon-bofang"})],1),e("v-uni-view",{staticClass:"vd-footToolbar flexbox flex_alignb"},[e("v-uni-view",{staticClass:"vd-info flex1"},[e("v-uni-view",{staticClass:"item at"},t._l(i.cate,function(i,n){return e("v-uni-view",{key:n,staticClass:"kw",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tofllist.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"bold fs_18 mr_5"},[t._v("＃")]),t._v(t._s(i.name))],1)}),1),e("v-uni-view",{staticClass:"item subtext "},[t._v(t._s(i.title))]),e("v-uni-view",{staticClass:"item uinfo flexbox flex_alignc"},[e("v-uni-text",{staticClass:"name"},[t._v(t._s(i.userinfo.user_nicename))]),e("v-uni-text",{staticClass:"btn-attention bg_linear1",class:"1"==i.isattent?"on":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleAttention(n)}}},[t._v(t._s("1"==i.isattent?"已关注":"关注"))])],1),e("v-uni-view",{staticClass:"item reply",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleVideoComment(n)}}},[e("v-uni-text",{staticClass:"iconfont icon-pinglun mr_5"}),t._v("写评论...")],1)],1),e("v-uni-view",{staticClass:"vd-sidebar"},[e("v-uni-image",{staticClass:"avator mb_5",attrs:{src:i.userinfo.avatar,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.touserhome(i.userinfo)}}}),i.cart?e("v-uni-view",{staticClass:"ls cart flexbox bg_linear3",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleVideoCart(n)}}},[e("v-uni-text",{staticClass:"iconfont icon-cart"})],1):t._e(),e("v-uni-view",{staticClass:"ls",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleIsLike(n)}}},[e("v-uni-text",{staticClass:"iconfont icon-like",class:1==i.islike?"like":""}),e("v-uni-text",{staticClass:"num"},[t._v(t._s(i.likes))])],1),e("v-uni-view",{staticClass:"ls",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleVideoComment(n)}}},[e("v-uni-text",{staticClass:"iconfont icon-liuyan"}),e("v-uni-text",{staticClass:"num"},[t._v(t._s(i.comments))])],1),e("v-uni-view",{staticClass:"ls",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.shares(n)}}},[e("v-uni-text",{staticClass:"iconfont icon-share"}),e("v-uni-text",{staticClass:"num"},[t._v(t._s(i.shares))])],1)],1)],1)],1)],1)]})],2)],1),e("video-cart",{ref:"videoCart",attrs:{vlist:t.vlist}}),e("video-comment",{ref:"videoComment",attrs:{vlist:t.vlist}}),e("uni-pop",{ref:"uniPop"})],1)},s=[];e.d(i,"b",function(){return a}),e.d(i,"c",function(){return s}),e.d(i,"a",function(){return n})},ca64:function(t,i,e){"use strict";e.r(i);var n=e("a16a"),a=e("8a0c");for(var s in a)"default"!==s&&function(t){e.d(i,t,function(){return a[t]})}(s);e("e3f4");var o,r=e("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"c582046c",null,!1,n["a"],o);i["default"]=c.exports},e3f4:function(t,i,e){"use strict";var n=e("2a33"),a=e.n(n);a.a},f923:function(t,i,e){"use strict";var n=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("e814")),s=n(e("cebc")),o=n(e("5ede")),r=n(e("da3e")),c=n(e("4455")),d=n(e("b8fa")),l=e("2f62"),u=null,v={data:function(){return{page:1,videoIndex:0,vlist:[],isPlay:!0,clickNum:0,isLike:!1,currentTabIndex:0,userInfo:{},showAd:!0,time:5,screenAd:"",toUrl:""}},computed:(0,s.default)({},(0,l.mapState)(["user","token"])),components:{videoCart:r.default,videoComment:c.default},onLoad:function(t){if(this.getScreenad(),this.autoCloseAd(),!this.user)return uni.reLaunch({url:"../auth/login"}),!1;this.userInfo=this.user,console.log(this.user.coin),this.getvideolist(),t.index&&(this.videoIndex=(0,a.default)(t.index))},onReady:function(){},onShow:function(){},methods:{openOpro:function(){},getScreenad:function(){var t=this;o.default.request({url:"service=home.getScreenad",method:"POST"}).then(function(i){1==i.data.data.code&&(t.screenAd=i.data.data.info.thumb,t.toUrl=i.data.data.info.url,console.log(t.toUrl))}).catch(function(t){})},toVebView:function(){uni.navigateTo({url:"/pages/uVideo/webview?url="+this.toUrl})},closeAd:function(){this.showAd=!1},autoCloseAd:function(){var t=this,i=setInterval(function(){t.time--,0===t.time&&(clearInterval(i),t.showAd=!1)},1e3)},touserhome:function(t){console.log(t),uni.navigateTo({url:"/pages/uVideo/uHomeVideo?id="+t.id+"&name="+t.user_nicename})},shares:function(){uni.navigateTo({url:"/pages/share/share"})},tofllist:function(){uni.switchTab({url:"/pages/uVideo/fenlei"})},getvideolist:function(){var t=this;o.default.request({url:"service=video.getRecommendVideos",method:"POST",data:{token:this.user.token,uid:this.user.id,p:this.page}}).then(function(i){0==i.data.data.code&&(1==t.page?t.vlist=i.data.data.info:t.vlist=t.vlist.concat(i.data.data.info),t.init())}).catch(function(t){})},handleTabbar:function(t){this.currentTabIndex=t},init:function(){var t=this;this.videoContextList=[];for(var i=0;i<this.vlist.length;i++)this.videoContextList.push(uni.createVideoContext("myVideo"+i,this));setTimeout(function(){t.play(t.videoIndex)},500)},isFiveMultiply:function(t){return t%5===0},handleSlider:function(t){var i=t.detail.current;1==this.isFiveMultiply(i)&&(this.page=this.page+1,this.getvideolist(this.id)),this.videoIndex>=0&&(this.videoContextList[this.videoIndex].pause(),this.videoContextList[this.videoIndex].seek(0),this.isPlay=!1),i===this.videoIndex+1?this.play(this.videoIndex+1):i===this.videoIndex-1&&this.play(this.videoIndex-1),this.videoIndex=i,this.setclick(i)},setclick:function(t){if(!this.user)return!1;1==this.isPlay&&o.default.request({url:"service=Video.addView",method:"POST",data:{token:this.user.token,videoid:this.vlist[t].id,random_str:(0,d.default)(this.user.id+"-"+this.vlist[t].id+"-#2hgfk85cm23mk58vncsark"),uid:this.user.id}}).then(function(t){}).catch(function(t){})},play:function(t){var i=this.$refs.uniPop,e=this;this.vlist[t].price>0?i.show({skin:"H5",content:"剩余观看次数："+this.user.coin%this.vlist[t].price+"次(是否购买?)",btns:[{text:"取消",onTap:function(){i.close(),e.pause(t)}},{text:"购买",style:"color: #feb719",onTap:function(){e.byvideo(t),i.close()}}]}):(this.videoContextList[t].play(),this.isPlay=!0)},pause:function(t){this.videoContextList[t].pause(),this.isPlay=!1},byvideo:function(t){var i=this;o.default.request({url:"service=Video.buyVideo",method:"POST",data:{token:this.user.token,videoid:this.vlist[t].id,random_str:(0,d.default)(this.user.id+"-"+this.vlist[t].id+"-#2hgfk85cm23mk58vncsark"),uid:this.user.id}}).then(function(e){0==e.data.data.code?(i.videoContextList[t].play(),i.isPlay=!0,i.vlist[t].price=0):uni.showToast({title:e.data.data.msg,icon:"none"})}).catch(function(t){})},handleClicked:function(t){var i=this;u&&clearTimeout(u),this.clickNum++,u=setTimeout(function(){i.clickNum>=2||(i.isPlay?i.pause(t):i.play(t)),i.clickNum=0},300)},handleAttention:function(t){var i=this.vlist,e=this.userInfo;o.default.request({url:"service=User.setAttent",method:"POST",data:{uid:this.user.id,token:this.user.token,touid:i[t].uid}}).then(function(n){"0"==n.data.data.info[0].isattent?i[t].isattent="0":i[t].isattent="1";for(var a=0,s=0;s<=i.length;s++)"1"==i[s].isattent&&(a+=1),e.follows=a}).catch(function(t){})},handleIsLike:function(t){0==this.vlist[t].islike?(this.vlist[t].islike=1,this.vlist[t].likes=(0,a.default)(this.vlist[t].likes)+1):(this.vlist[t].islike=0,this.vlist[t].likes=(0,a.default)(this.vlist[t].likes)-1),1==this.vlist[t].islike&&o.default.request({url:"service=video.addLike",method:"POST",data:{token:this.user.token,videoid:this.vlist[t].id,uid:this.user.id}}).then(function(t){}).catch(function(t){})},handleVideoComment:function(t){this.$refs.videoComment.show(t)},handleVideoCart:function(t){this.$refs.videoCart.show(t)}}};i.default=v}}]);